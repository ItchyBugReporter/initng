SrcDir TOP src modules ngc4 ;

InstallFile $(DESTDIR)$(includedir)/initng : libngcclient.h initng_ngc4.h ;

SharedLibrary libngcclient.so.0.0.0 : libngcclient.c ;
InstallBin $(DESTDIR)$(libdir) : libngcclient.so.0.0.0 ;

InstallLink $(DESTDIR)$(libdir)/libngcclient.so.0 : $(DESTDIR)$(libdir) : libngcclient.so.0.0.0 ;
InstallLink $(DESTDIR)$(libdir)/libngcclient.so : $(DESTDIR)$(libdir) : libngcclient.so.0 ;

SharedLibrary modngc4.so : initng_ngc4.c ;
InstallBin $(DESTDIR)$(moddir) : modngc4.so ;

Main ngc : ngc4.c ;
NEEDLIBS on ngc += libngcclient.so.0.0.0 ;
LINKFLAGS on ngc +=
	-Wl,--whole-archive [ FDirName $(TOP) src main libinitng$(SUFLIB) ]
	-Wl,--no-whole-archive -ldl ;
InstallBin $(DESTDIR)$(sbindir) : ngc ;

InstallLink ngdc : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngstart : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngstop : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngreboot : $(DESTDIR)$(sbindir) : ngc ;
InstallLink nghalt : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngzap : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngrestart : $(DESTDIR)$(sbindir) : ngc ;
InstallLink ngstatus : $(DESTDIR)$(sbindir) : ngc ;
